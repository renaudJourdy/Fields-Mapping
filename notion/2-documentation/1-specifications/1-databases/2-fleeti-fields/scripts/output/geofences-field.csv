Name,Category,Computation Approach,Computation Structure JSON,Data Type,Dependencies,Description,Field Path,Field Type,REST API Endpoints,Status,Version Added
geofences,metadata,"Calculated: derive from location_latitude and location_longitude using derive_geofences function. Calls Geofence Service to determine which geofences the asset is currently inside. Returns array of geofence objects with geofence_id and geofence_name. Supports overlapping geofences - asset can be in multiple geofences simultaneously.

Pseudo code:
coordinates = { lat: location_latitude, lng: location_longitude }
geofences = geofenceService.getGeofencesAtLocation(coordinates, asset_id)
return geofences.map(g => ({ geofence_id: g.id, geofence_name: g.name }))","{
""type"": ""calculated"",
""calculation_type"": ""function_reference"",
""function"": ""derive_geofences"",
""parameters"": {
""fleeti"": [
""location_latitude"",
""location_longitude""
]
}
}",array,"location_latitude, location_longitude",Current geofences the asset is inside,geofences[],calculated,"/telemetry (CUSTOMER), /telemetry (FLEETI)",planned,1.0.0
sensors.environment[],sensors,"# Computation Approach: Calculated: derive from asset.accessories[].sensors[] metadata and telemetry provider fields using derive_sensors_environment function. Function reads sensor configuration from asset metadata where each sensor has a provider_field array property listing which provider fields map to that sensor. Matches provider fields to sensors based on provider_field array in sensor metadata. Applies prioritized mapping with unit conversions and validation. If provider_field array is empty, fetches sensor configuration from Navixy API (GET https://api.navixy.com/v2/fsm/tracker/sensor/list) matching by sensor ID. Enriches provider fields with correspondences from matrix (maps processed Navixy fields to raw avl_io equivalents). Returns array of sensor objects with grouped measurements (temperature, humidity, battery) from same physical sensor.
#
# Backend Processing:
# - Triggers function when any provider field listed above is present in telemetry packet
# - Function receives full telemetry packet and reads relevant provider fields dynamically
# - Function matches provider fields to sensors via asset.accessories[].sensors[] metadata
#
# Unit Conversion Rules:
# - Temperature: Divide by 10 for raw avl_io (except avl_io_202 and avl_io_204)
# - Humidity: Divide by 10 for raw avl_io (multiplier 0.1 per Teltonika spec)
# - Battery: Already in percent, no division needed
#
# Validation Rules:
# - Temperature: -120 to 120, exclude -128 (error)
# - Humidity: 0-1000, exclude 65535, 65534, 65533 (error codes)
# - Battery: 0-100, exclude -128 (error)
#
# Implementation Location: notion/2-documentation/1-specifications/1-databases/2-fleeti-fields/scripts/functions/derive_sensors_environment.js","{
""type"": ""calculated"",
""calculation_type"": ""function_reference"",
""function"": ""derive_sensors_environment"",
""parameters"": {
""fleeti"": [],
""provider"": {
""navixy"": [
""avl_io_202"",
""avl_io_204"",
""avl_io_72"",
""avl_io_73"",
""avl_io_74"",
""avl_io_75"",
""avl_io_25"",
""avl_io_26"",
""avl_io_27"",
""avl_io_28"",
""ext_temp_sensor_1"",
""ext_temp_sensor_2"",
""ext_temp_sensor_3"",
""ext_temp_sensor_4"",
""ble_temp_sensor_1"",
""ble_temp_sensor_2"",
""ble_temp_sensor_3"",
""ble_temp_sensor_4"",
""lls_temperature_1"",
""lls_temperature_2"",
""temp_sensor"",
""avl_io_86"",
""avl_io_104"",
""avl_io_106"",
""avl_io_108"",
""ble_humidity_1"",
""ble_humidity_2"",
""ble_humidity_3"",
""ble_humidity_4"",
""humidity_1"",
""humidity_2"",
""avl_io_29"",
""avl_io_20"",
""avl_io_22"",
""avl_io_23"",
""ble_battery_level_1"",
""ble_battery_level_2"",
""ble_battery_level_3"",
""ble_battery_level_4""
]
}
}
}",array,,"Array of environmental sensor readings (temperature, humidity, battery). Each entry represents one physical sensor/accessory. Sensor identity (id, name, position) and provider field mappings derived from asset.accessories[].sensors[] metadata. ",sensors.environment[],calculated,"/telemetry (CUSTOMER), /telemetry (FLEETI)",planned,1.0.0
